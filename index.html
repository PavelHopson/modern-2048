<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modern 2048</title>
  <style>
    :root {
      /* –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ */
      --bg-primary: #faf8ef;
      --bg-secondary: #bbada0;
      --cell-bg: #cdc1b4;
      --text-primary: #776e65;
      
      /* –¶–≤–µ—Ç–∞ –ø–ª–∏—Ç–æ–∫ */
      --tile-2: #eee4da;
      --tile-4: #ede0c8;
      --tile-8: #f2b179;
      --tile-16: #f59563;
      --tile-32: #f67c5f;
      --tile-64: #f65e3b;
      --tile-128: #edcf72;
      --tile-256: #edcc61;
      --tile-512: #edc850;
      --tile-1024: #edc53f;
      --tile-2048: #edc22e;
      --tile-default: #3c3a32;
      
      /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –ø–ª–∏—Ç–∫–∞—Ö */
      --tile-text-light: #776e65;
      --tile-text-dark: #f9f6f2;
    }

    [data-theme="dark"] {
      /* –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ */
      --bg-primary: #121212;
      --bg-secondary: #1e1e1e;
      --cell-bg: #2d2d2d;
      --text-primary: #e0e0e0;
      
      /* –¶–≤–µ—Ç–∞ –ø–ª–∏—Ç–æ–∫ (–Ω–µ–º–Ω–æ–≥–æ —Ç–µ–º–Ω–µ–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö) */
      --tile-2: #d8d0c8;
      --tile-4: #c8c0b0;
      --tile-8: #d9a066;
      --tile-16: #d48050;
      --tile-32: #d6604f;
      --tile-64: #d64e2b;
      --tile-128: #cda052;
      --tile-256: #cca041;
      --tile-512: #c99c30;
      --tile-1024: #c6991f;
      --tile-2048: #c3960e;
      --tile-default: #5a5a5a;
    }

    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
      transition: background-color 0.3s, color 0.3s;
    }
    
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: var(--bg-primary);
      color: var(--text-primary);
      padding: 20px;
      transition: all 0.3s;
    }
    
    .game-header { 
      text-align: center; 
      margin-bottom: 20px; 
      width: 100%; 
    }
    
    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: var(--bg-secondary);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--text-primary);
      font-size: 18px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    
    .score-container { 
      display: flex; 
      justify-content: space-around; 
      width: 400px; 
      margin-top: 10px; 
    }
    
    .score-box { 
      background: var(--bg-secondary); 
      color: white; 
      padding: 10px 15px; 
      border-radius: 5px; 
      min-width: 80px; 
    }
    
    .score-value { 
      font-size: 24px; 
      font-weight: bold; 
      margin-top: 5px; 
    }
    
    #game-container {
      position: relative;
      width: 400px;
      height: 400px;
      background: var(--bg-secondary);
      border-radius: 6px;
      padding: 10px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    canvas { 
      width: 100%; 
      height: 100%; 
      border-radius: 4px; 
      display: block; 
    }
    
    .game-message {
      position: absolute; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%;
      background: rgba(238, 228, 218, 0.85);
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center;
      border-radius: 6px; 
      opacity: 0; 
      transition: opacity 0.25s; 
      pointer-events: none;
    }
    
    [data-theme="dark"] .game-message {
      background: rgba(50, 50, 50, 0.85);
    }
    
    .game-message.game-over { 
      opacity: 1; 
      pointer-events: auto; 
    }
    
    .message-title { 
      font-size: 40px; 
      font-weight: bold; 
      margin-bottom: 10px; 
      color: var(--text-primary); 
    }
    
    .message-subtitle { 
      font-size: 16px; 
      color: var(--text-primary); 
    }
    
    @media (max-width: 420px) {
      #game-container { 
        width: 320px; 
        height: 320px; 
      }
      
      .score-container { 
        width: 320px; 
      }
    }
  </style>
</head>
<body>
  <!-- –°–ö–†–ò–ü–¢ –ë–ê–ó–û–í–û–ì–û –ü–£–¢–ò –î–û–õ–ñ–ï–ù –ë–´–¢–¨ –ü–ï–†–í–´–ú –í BODY -->
  <script>
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ –ø—É—Ç–∏ –¥–ª—è GitHub Pages
    const repoName = '/modern-2048';
    window.__BASE__ = location.pathname.startsWith(repoName) ? repoName : '';
  </script>
  
  <button class="theme-toggle" id="theme-toggle">üåô</button>
  
  <div class="game-header">
    <h1>Modern 2048</h1>
    <div class="score-container">
      <div class="score-box">
        <div>–°—á–µ—Ç</div>
        <div id="score" class="score-value">0</div>
      </div>
      <div class="score-box">
        <div>–†–µ–∫–æ—Ä–¥</div>
        <div id="best-score" class="score-value">0</div>
      </div>
    </div>
  </div>

  <div id="game-container">
    <canvas id="game-canvas" width="400" height="400"></canvas>
    <div id="game-message" class="game-message">
      <div class="message-title">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</div>
      <div class="message-subtitle">–ù–∞–∂–º–∏—Ç–µ –ø—Ä–æ–±–µ–ª –¥–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã</div>
    </div>
  </div>

  <div id="leaderboard" style="margin-top: 20px; max-width: 400px;">
    <h3>–¢–æ–ø-5 —Ä–µ–∫–æ—Ä–¥–æ–≤:</h3>
    <ol>
      <li>–†–µ–∫–æ—Ä–¥—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</li>
    </ol>
  </div>

  <!-- –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –ò–ú–ü–û–†–¢ MAIN.JS -->
  <script type="module">
    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ –ø—É—Ç–∏ –¥–ª—è Vite
    import './src/js/main.js';
  </script>
</body>
</html>